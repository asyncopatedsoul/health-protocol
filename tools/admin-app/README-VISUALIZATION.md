# Health Protocol Activities Visualization

This visualization displays the activities and their relationships from the Health Protocol database using D3.js.

## Features

- Interactive graph visualization of activities and their relationships
- Filter activities by type (breathwork, calisthenics, meditation, strength)
- Filter relationships by type (related_skill, compound_skill, prerequisite_skill)
- Drag nodes to rearrange the visualization
- Hover over nodes to see details
- Responsive design that works on different screen sizes

## Implementation Details

The visualization uses:

- D3.js v7 for rendering the force-directed graph
- SQLite database for storing activity and relationship data
- Python script for exporting data from the database to JSON
- SvelteKit API route (optional) for dynamic data loading

## Getting Started

### Option 1: Using the Standalone HTML Version

1. Generate the activities data:
   ```bash
   python3 export_activities_data.py
   ```

2. Start the SvelteKit development server:
   ```bash
   pnpm run dev
   ```

3. Open your browser and navigate to:
   ```
   http://localhost:5173/activities-visualization.html
   ```

### Option 2: Using the SvelteKit Route

1. Install dependencies:
   ```bash
   pnpm add d3 @types/d3 sqlite3
   ```

2. Start the SvelteKit development server:
   ```bash
   pnpm run dev
   ```

3. Open your browser and navigate to:
   ```
   http://localhost:5173/activities
   ```

### Or simply run the automated script:

```bash
chmod +x update_and_run.sh
./update_and_run.sh
```

## How It Works

1. The visualization fetches data from either:
   - The `/api/activities` API endpoint (which reads directly from the database)
   - The static `/activities-data.json` file (generated by the Python script)

2. D3.js creates a force-directed graph where:
   - Nodes represent activities
   - Colors indicate the activity type
   - Links show relationships between activities
   - Link colors indicate the relationship type

3. The visualization provides interactive filters to explore the data by:
   - Activity type (breathwork, calisthenics, meditation, strength)
   - Relationship type (related_skill, compound_skill, prerequisite_skill)

## Customization

The visualization can be customized by:

1. Modifying the colors in the CSS and JavaScript
2. Adjusting the force simulation parameters for different layout behaviors
3. Adding additional filters or interactive features
4. Extending the data model to include more attributes

## Troubleshooting

If you encounter issues:

1. Make sure the database file `health_protocol.db` exists
2. Check the browser console for JavaScript errors
3. Verify that the Python export script runs successfully
4. Ensure the required dependencies are installed

## Technology Stack

- D3.js: For interactive data visualization
- SvelteKit: Application framework
- SQLite: Database engine
- Python: Data export scripts